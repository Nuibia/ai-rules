{"version":3,"sources":["../src/index.ts","../package.json"],"sourcesContent":["import { Command } from 'commander';\nimport { promises as fs } from 'fs';\nimport path from 'path';\nimport process from 'process';\nimport kleur from 'kleur';\nimport pkg from '../package.json';\n\nconst { cyan, green, red, yellow } = kleur;\n\ntype TemplateDescriptor = {\n  id: string;\n  source: string;\n  target: string;\n  description: string;\n};\n\nconst TEMPLATE_CATALOG: TemplateDescriptor[] = [\n  {\n    id: 'commitlint',\n    source: 'commitlint.config.cjs',\n    target: 'commitlint.config.cjs',\n    description: 'commitlint Êèê‰∫§‰ø°ÊÅØÊ†°È™åÈÖçÁΩÆ',\n  },\n  {\n    id: 'cursor-guidelines',\n    source: path.join('cursor', 'commit-guidelines.md'),\n    target: path.join('.cursor', 'rules', 'commit-guidelines.md'),\n    description: 'Cursor AI Êåá‰ª§Ê®°Êùø',\n  },\n  {\n    id: 'claude-guidelines',\n    source: path.join('claude', 'commit-guidelines.md'),\n    target: path.join('.claude', 'commit-guidelines.md'),\n    description: 'Claude AI Êåá‰ª§Ê®°ÊùøÔºåÂèØÊåâÈúÄÂµåÂÖ•ÈÖçÁΩÆÊñá‰ª∂',\n  },\n];\n\nconst program = new Command();\n\nprogram\n  .name('airules')\n  .description('AI Âçè‰ΩúËßÑËåÉÊ®°ÊùøÂÜôÂÖ•Â∑•ÂÖ∑')\n  .version(pkg.version);\n\nasync function ensureTemplateRoot(): Promise<string> {\n  const candidatePaths = [\n    path.resolve(__dirname, '../templates'),\n    path.resolve(__dirname, '../../templates'),\n    path.resolve(process.cwd(), 'templates'),\n  ];\n\n  for (const candidate of candidatePaths) {\n    try {\n      const stat = await fs.stat(candidate);\n      if (stat.isDirectory()) {\n        return candidate;\n      }\n    } catch {\n      // ignore\n    }\n  }\n\n  throw new Error('Êú™ÊâæÂà∞Ê®°ÊùøÁõÆÂΩïÔºåËØ∑Á°ÆËÆ§Â∑≤ÊâßË°åÊûÑÂª∫ÊàñÂ§çÂà∂ templates ËµÑÊ∫ê„ÄÇ');\n}\n\nasync function pathExists(filePath: string): Promise<boolean> {\n  try {\n    await fs.access(filePath);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nasync function copyTemplate(\n  templateRoot: string,\n  descriptor: TemplateDescriptor,\n  targetDir: string,\n  force: boolean,\n): Promise<{ skipped: boolean; targetPath: string }> {\n  const srcPath = path.join(templateRoot, descriptor.source);\n  const destPath = path.join(targetDir, descriptor.target);\n\n  if (!(await pathExists(srcPath))) {\n    throw new Error(`Ê®°ÊùøÁº∫Â§±Ôºö${descriptor.id}`);\n  }\n\n  const destDir = path.dirname(destPath);\n  await fs.mkdir(destDir, { recursive: true });\n\n  if (!force && (await pathExists(destPath))) {\n    return { skipped: true, targetPath: destPath };\n  }\n\n  const content = await fs.readFile(srcPath);\n  await fs.writeFile(destPath, content);\n  return { skipped: false, targetPath: destPath };\n}\n\nprogram\n  .command('list')\n  .description('ÂàóÂá∫ÂèØÁî®Ê®°Êùø')\n  .action(async () => {\n    const templateRoot = await ensureTemplateRoot();\n    console.log(cyan(`Ê®°ÊùøÁõÆÂΩïÔºö${templateRoot}`));\n    TEMPLATE_CATALOG.forEach((item) => {\n      console.log(\n        `${green(item.id)} ‚Üí ${item.target}\\n  ${item.description}`,\n      );\n    });\n  });\n\nprogram\n  .command('init [targetDir]')\n  .description('Â∞ÜÂÖ®ÈÉ®Ê®°ÊùøÂÜôÂÖ•ÁõÆÊ†áÁõÆÂΩï')\n  .option('-f, --force', 'ÂÖÅËÆ∏Ë¶ÜÁõñÂ∑≤Â≠òÂú®ÁöÑÊñá‰ª∂', false)\n  .action(async (targetDir = '.', options: { force?: boolean }) => {\n    const destination = path.resolve(process.cwd(), targetDir);\n    const templateRoot = await ensureTemplateRoot();\n    const force = Boolean(options.force);\n\n    console.log(cyan(`ÁõÆÊ†áÁõÆÂΩïÔºö${destination}`));\n\n    await Promise.all(\n      TEMPLATE_CATALOG.map((tpl) =>\n        copyTemplate(templateRoot, tpl, destination, force).then(\n          ({ skipped, targetPath }) => {\n            if (skipped) {\n              console.log(\n                yellow(`Ë∑≥ËøáÔºö${tpl.id}Ôºà${targetPath} Â∑≤Â≠òÂú®Ôºâ`),\n              );\n            } else {\n              console.log(green(`ÂÜôÂÖ•Ôºö${tpl.id} ‚Üí ${targetPath}`));\n            }\n          },\n        ),\n      ),\n    );\n\n    console.log('');\n    console.log(\n      green(\n        'ÂÆåÊàê üéâ ËØ∑Âú®ÁõÆÊ†áÈ°πÁõÆ‰∏≠ÊâßË°å `yarn add -D @commitlint/cli` Âπ∂ÈÖçÁΩÆÊèê‰∫§Èí©Â≠ê„ÄÇ',\n      ),\n    );\n    console.log(\n      'Â¶ÇÈúÄÂçïÁã¨ÂÜôÂÖ•Êüê‰∏™Ê®°ÊùøÔºåÂèØÂêéÁª≠‰ΩøÁî® `airules apply <Ê®°ÊùøID>`ÔºàÂºÄÂèë‰∏≠Ôºâ„ÄÇ',\n    );\n  });\n\nprogram\n  .command('apply <templateId> [targetDir]')\n  .description('ÊåâÊ®°Êùø ID ÂÜôÂÖ•Âçï‰∏™Êñá‰ª∂ÊàñÁõÆÂΩï')\n  .option('-f, --force', 'ÂÖÅËÆ∏Ë¶ÜÁõñÂ∑≤Â≠òÂú®ÁöÑÊñá‰ª∂', false)\n  .action(async (templateId: string, targetDir = '.', options) => {\n    const descriptor = TEMPLATE_CATALOG.find((tpl) => tpl.id === templateId);\n    if (!descriptor) {\n      console.error(red(`Êú™ÊâæÂà∞Ê®°ÊùøÔºö${templateId}`));\n      console.log(\n        `ÂèØÁî®Ê®°ÊùøÔºö${TEMPLATE_CATALOG.map((tpl) => tpl.id).join(', ')}`,\n      );\n      process.exitCode = 1;\n      return;\n    }\n\n    const destination = path.resolve(process.cwd(), targetDir);\n    const templateRoot = await ensureTemplateRoot();\n    const force = Boolean(options.force);\n\n    try {\n      const { skipped, targetPath } = await copyTemplate(\n        templateRoot,\n        descriptor,\n        destination,\n        force,\n      );\n      if (skipped) {\n        console.log(\n          yellow(\n            `Ë∑≥ËøáÔºö${descriptor.id}Ôºà${targetPath} Â∑≤Â≠òÂú®Ôºå‰ΩøÁî® --force Âº∫Âà∂Ë¶ÜÁõñÔºâ`,\n          ),\n        );\n      } else {\n        console.log(green(`ÂÜôÂÖ•Ôºö${descriptor.id} ‚Üí ${targetPath}`));\n      }\n    } catch (error) {\n      console.error(red(`ÂÜôÂÖ•Â§±Ë¥•Ôºö${(error as Error).message}`));\n      process.exitCode = 1;\n    }\n  });\n\nprogram.parseAsync(process.argv).catch((error) => {\n  console.error(red(`ÊâßË°åÂ§±Ë¥•Ôºö${error.message}`));\n  process.exit(1);\n});\n\n","{\n  \"name\": \"ai-rules-cli\",\n  \"version\": \"0.1.0\",\n  \"description\": \"Â∞Ü AI Âçè‰ΩúËßÑËåÉÊ®°Êùø‰∏ÄÈîÆÂÜôÂÖ•‰ªªÊÑèÈ°πÁõÆÁöÑÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑„ÄÇ\",\n  \"bin\": {\n    \"airules\": \"dist/index.js\"\n  },\n  \"main\": \"dist/index.js\",\n  \"types\": \"dist/index.d.ts\",\n  \"scripts\": {\n    \"build\": \"tsup\",\n    \"dev\": \"tsup --watch\",\n    \"clean\": \"rm -rf dist\"\n  },\n  \"dependencies\": {\n    \"commander\": \"^12.1.0\",\n    \"kleur\": \"^4.1.5\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^20.12.7\",\n    \"tsup\": \"^8.0.1\"\n  },\n  \"files\": [\n    \"dist\",\n    \"templates\"\n  ]\n}\n\n"],"mappings":"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","names":["kleur","path","process","fs"]}